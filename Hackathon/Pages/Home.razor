@page "/"
@using ClassLibrary.Db
@using Microsoft.EntityFrameworkCore
@using MySqlConnector
@using MySql.Data.MySqlClient
@inject IDbContextFactory<TeamDbContext> _db

<h1>Hello, world!</h1>


@code{
    List<Activity> activities = new List<Activity>();
    protected override async Task OnInitializedAsync() 
    {
        try
        {
            using var dbContext = _db.CreateDbContext();
            activities = dbContext.Activities.Include(i => i.Profiles).ToList();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
}
